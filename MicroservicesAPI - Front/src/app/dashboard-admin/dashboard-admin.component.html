<div class="admin-panel">
  <nav class="sidebar">
    <ul>
      <li [class.active]="selectedTab === 'users'" (click)="selectTab('users')">Utilisateurs</li>
      <li [class.active]="selectedTab === 'stores'" (click)="selectTab('stores')">Boutiques</li>
      <li [class.active]="selectedTab === 'products'" (click)="selectTab('products')">Produits</li>
      <li [class.active]="selectedTab === 'categories'" (click)="selectTab('categories')">Catégories</li>
    </ul>
  </nav>

  <div class="content">
    <div *ngIf="selectedTab === 'users'">
      <h2>Utilisateurs</h2>
      <table class="admin-table">
        <tr>
          <th>Nom</th>
          <th>Email</th>
          <th>Rôle</th>
          <th>Actions</th>
        </tr>
        <tr *ngFor="let user of users">
          <td>{{ user.name }}</td>
          <td>{{ user.email }}</td>
          <td>{{ user.role }}</td>
          <td>
            <button (click)="openEditModal('user', user)">Modifier</button>
            <button class="delete-btn" (click)="deleteUser(user._id)">Supprimer</button>
          </td>
        </tr>
      </table>
    </div>

    <div *ngIf="selectedTab === 'stores'">
      <h2>Boutiques</h2>
      <table class="admin-table">
        <tr>
          <th>Nom</th>
          <th>Description</th>
          <th>Actions</th>
        </tr>
        <tr *ngFor="let store of stores">
          <td>{{ store.name }}</td>
          <td>{{ store.description }}</td>
          <td>
            <button (click)="openEditModal('store', store)">Modifier</button>
            <button class="delete-btn" (click)="deleteStore(store._id)">Supprimer</button>
          </td>
        </tr>
      </table>
    </div>

    <div *ngIf="selectedTab === 'products'">
      <h2>Produits</h2>
      <table class="admin-table">
        <tr>
          <th>Nom</th>
          <th>Description</th>
          <th>Prix</th>
          <th>Actions</th>
        </tr>
        <tr *ngFor="let product of products">
          <td>{{ product.name }}</td>
          <td>{{ product.description }}</td>
          <td>{{ product.price }} €</td>
          <td>
            <button (click)="openEditModal('product', product)">Modifier</button>
            <button class="delete-btn" (click)="deleteProduct(product._id)">Supprimer</button>
          </td>
        </tr>
      </table>
    </div>

    <div *ngIf="selectedTab === 'categories'">
      <h2>Catégories</h2>
      <table class="admin-table">
        <tr>
          <th>Nom</th>
          <th>Description</th>
          <th>Actions</th>
        </tr>
        <tr *ngFor="let category of categorys">
          <td>{{ category.name }}</td>
          <td>{{ category.description }}</td>
          <td>
            <button (click)="openEditModal('category', category)">Modifier</button>
            <button class="delete-btn" (click)="deleteCategory(category._id)">Supprimer</button>
          </td>
        </tr>
      </table>
    </div>
  </div>

  <!-- Modal édition -->
  <div class="overlay" *ngIf="showEditModal">
    <div class="modal">
      <h2>Modifier {{ editType | titlecase }}</h2>
      <form (ngSubmit)="submitEdit()">
        <div *ngFor="let field of editFields">
          <label>{{ field.label }}</label>
          <input [(ngModel)]="editItem[field.key]" [name]="field.key" required />
        </div>
        <div class="form-buttons">
          <button type="submit">Enregistrer</button>
          <button type="button" (click)="closeEditModal()">Annuler</button>
        </div>
      </form>
    </div>
  </div>
</div>