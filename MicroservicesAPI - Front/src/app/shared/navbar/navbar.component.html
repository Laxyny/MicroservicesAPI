<nav class="navbar">
    <a href="/homepage" class="text-wrapper">
        <div class="brand">Le Petit Livreur</div>
    </a>

    <div class="search-wrapper">
        <input type="text" placeholder="Rechercher un produit..." class="search-input" 
            (focus)="onSearchFocus()" (blur)="onSearchBlur()" (input)="onSearchChange($event)" />
    </div>

    <div class="cart-icon" (click)="toggleCart()">
        <svg width="28" height="28" fill="#03dac6" viewBox="0 0 24 24">
            <path d="M7 18c-1.104 0-2 .896-2 2s.896 2 2 2 2-.896 2-2-.896-2-2-2zm10 0c-1.104 0-2 .896-2 2s.896 2 2 2 2-.896 2-2-.896-2-2-2zm1.83-3.41l1.72-7.45A1 1 0 0 0 19.56 6H6.21l-.94-2H2v2h2l3.6 7.59-1.35 2.44A1.992 1.992 0 0 0 6 17c0 1.1.9 2 2 2h12v-2H8.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.74-1.03z"/>
        </svg>

        <div class="cart-dropdown" *ngIf="cartOpen">
        <div *ngIf="cartItems.length === 0" class="empty-cart">Votre panier est vide.</div>
        <div *ngFor="let item of cartItems" class="cart-item">
            <span>{{ item.name }}</span>
            <span>{{ item.price }} €</span>
        </div>
        <button *ngIf="cartItems.length > 0" class="go-cart-btn" (click)="goToCart()">Voir le panier</button>
    </div>
    </div>

    <div class="account" (click)="toggleMenu()">
        <svg width="28" height="28" fill="#03dac6" viewBox="0 0 512 512" class="user-icon">
            <path d="M399 384.2C376.9 345.8 335.4 320 288 320l-64 0c-47.4 0-88.9 25.8-111 64.2c35.2 39.2 86.2 63.8 143 63.8s107.8-24.7 143-63.8zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm256 16a72 72 0 1 0 0-144 72 72 0 1 0 0 144z"/>
        </svg>

        <div class="dropdown" [class.show]="menuOpen">
            <p>{{ user?.name }}</p>
            <small>{{ user?.role === 'seller' ? 'Vendeur' : 'Client' }}</small>
            <button class="settings-btn" (click)="settings()">Paramètres</button>
            <button class="settings-btn" *ngIf="user?.role === 'seller'" (click)="goToMyStore()">Mes boutiques</button>
            <button class="logout-btn" (click)="logout()">Deconnexion</button>
        </div>
    </div>
</nav>